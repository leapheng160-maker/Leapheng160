<!DOCTYPE html>
<html>
<head>
  <title>Happy Anniversary! ❤️</title>
  <style>
    :root {
      --primary-pink: #ff8fa3;
      --dark-pink: #ff4d6d;
      --dark-bg: #1a1a1a;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      background-color: var(--dark-bg);
      color: white;
      margin: 0;
      padding: 20px;
      overflow-x: hidden;
    }

    /* Video Pop-up Overlay */
    #video-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none; 
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 1000;
      backdrop-filter: blur(15px);
    }

    .video-content {
      position: relative;
      width: 90%;
      max-width: 800px;
      aspect-ratio: 16/9;
      border: 5px solid var(--primary-pink);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 30px var(--dark-pink);
    }

    .close-video {
      margin-top: 25px;
      background: var(--dark-pink);
      color: white;
      border: none;
      padding: 10px 30px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    .close-video:hover { transform: scale(1.1); background: var(--primary-pink); }

    .bg-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
    .heart { position: absolute; color: rgba(255, 143, 163, 0.3); animation: float 6s linear infinite; bottom: -50px; pointer-events: none; }
    @keyframes float { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 90vh;
      z-index: 1;
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 2.5rem;
      border-radius: 30px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      display: inline-block; 
    }

    h1 { 
      font-family: 'Brush Script MT', cursive; 
      font-size: clamp(2rem, 8vw, 3.5rem);
      color: var(--primary-pink); 
      margin: 10px 0; 
    }

    .preview-container { margin-bottom: 20px; }
    .preview-img {
      width: 120px;
      height: 120px;
      border: 3px solid var(--primary-pink);
      border-radius: 10px;
      box-shadow: 0 0 15px var(--dark-pink);
      object-fit: cover;
    }

    #board {
      width: 360px;
      height: 360px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 15px;
      margin: 0 auto 20px auto; 
    }

    .piece {
      width: 120px;
      height: 120px;
      background-image: url("Together.jpg");
      background-size: 360px 360px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .selected {
      outline: 5px solid var(--dark-pink);
      outline-offset: -5px;
      transform: scale(0.95);
      box-shadow: 0 0 20px var(--dark-pink);
    }

    .btn {
      background: var(--dark-pink);
      color: white;
      border: none;
      padding: 12px 40px;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(255, 77, 109, 0.4);
      transition: 0.3s;
    }

    .btn:hover { transform: scale(1.05); background: var(--primary-pink); }
  </style>
</head>

<body>

  <div id="video-overlay">
    <div class="video-content">
      <iframe id="surprise-video" width="100%" height="100%" 
        src="" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
        allowfullscreen>
      </iframe>
    </div>
    <button class="close-video" onclick="closeVideo()">Back to our Puzzle ❤️</button>
  </div>

  <audio id="mySong">
    <source src="Ed Sheeran - Perfect.mp3" type="audio/mpeg">
  </audio>

  <div class="bg-hearts" id="bg-hearts"></div>

  <div class="container">
    <div class="glass-card">
        <h1>Happy Anniversary! ❤️</h1>
        <div class="preview-container">
          <p style="color: #ddd; margin-bottom: 10px;">Shuffle it first and match this picture baby:</p>
          <img class="preview-img" src="Together.jpg" alt="Goal">
        </div>
        <div id="board"></div>
        <button class="btn" onclick="shufflePieces()">Shuffle Puzzle</button>
    </div>
  </div>

<script>
const board = document.getElementById("board");
const size = 3;
let pieces = [];
let firstClickIndex = null;

function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.innerHTML = '❤';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDuration = Math.random() * 3 + 3 + 's';
    heart.style.fontSize = Math.random() * 15 + 10 + 'px';
    document.getElementById('bg-hearts').appendChild(heart);
    setTimeout(() => { heart.remove(); }, 6000);
}
setInterval(createHeart, 300);

function initGame() {
    pieces = [];
    for (let y = 0; y < size; y++) {
        for (let x = 0; x < size; x++) {
            pieces.push({ x, y, originalIndex: y * size + x });
        }
    }
}

function draw() {
    board.innerHTML = "";
    pieces.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "piece";
        if (i === firstClickIndex) div.classList.add("selected");
        div.style.backgroundPosition = `-${p.x * 120}px -${p.y * 120}px`;
        div.onclick = () => clickPiece(i);
        board.appendChild(div);
    });
}

function clickPiece(i) {
    if (firstClickIndex === null) {
        firstClickIndex = i;
        draw();
    } else {
        const temp = pieces[firstClickIndex];
        pieces[firstClickIndex] = pieces[i];
        pieces[i] = temp;
        firstClickIndex = null;
        draw();
        checkWin();
    }
}

function shufflePieces() {
    for (let i = pieces.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [pieces[i], pieces[j]] = [pieces[j], pieces[i]];
    }
    firstClickIndex = null;
    draw();
}

function checkWin() {
    const isWin = pieces.every((p, i) => p.originalIndex === i);
    if (isWin) {
        setTimeout(() => {
            const overlay = document.getElementById('video-overlay');
            const iframe = document.getElementById('surprise-video');
            
            // Your new Video ID: U4KEZOQqwgA
            const videoId = "U4KEZOQqwgA";
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&enablejsapi=1`;
            
            overlay.style.display = 'flex';
        }, 500);
    }
}

function closeVideo() {
    const overlay = document.getElementById('video-overlay');
    const iframe = document.getElementById('surprise-video');
    iframe.src = ""; 
    overlay.style.display = 'none';
}

initGame();
draw();
</script>

</body>
</html>